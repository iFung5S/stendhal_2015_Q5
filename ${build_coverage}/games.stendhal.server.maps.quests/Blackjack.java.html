<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Blackjack.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">stendhal</a> &gt; <a href="index.source.html" class="el_package">games.stendhal.server.maps.quests</a> &gt; <span class="el_source">Blackjack.java</span></div><h1>Blackjack.java</h1><pre class="source lang-java linenums">/* $Id$ */
/***************************************************************************
 *                   (C) Copyright 2003-2010 - Stendhal                    *
 ***************************************************************************
 ***************************************************************************
 *                                                                         *
 *   This program is free software; you can redistribute it and/or modify  *
 *   it under the terms of the GNU General Public License as published by  *
 *   the Free Software Foundation; either version 2 of the License, or     *
 *   (at your option) any later version.                                   *
 *                                                                         *
 ***************************************************************************/
package games.stendhal.server.maps.quests;

import games.stendhal.common.Direction;
import games.stendhal.common.grammar.Grammar;
import games.stendhal.common.grammar.ItemParserResult;
import games.stendhal.common.parser.Sentence;
import games.stendhal.server.core.engine.SingletonRepository;
import games.stendhal.server.core.engine.StendhalRPZone;
import games.stendhal.server.core.events.TurnListener;
import games.stendhal.server.entity.RPEntity;
import games.stendhal.server.entity.item.StackableItem;
import games.stendhal.server.entity.npc.ChatAction;
import games.stendhal.server.entity.npc.ConversationPhrases;
import games.stendhal.server.entity.npc.ConversationStates;
import games.stendhal.server.entity.npc.EventRaiser;
import games.stendhal.server.entity.npc.SpeakerNPC;
import games.stendhal.server.entity.npc.action.BehaviourAction;
import games.stendhal.server.entity.npc.behaviour.impl.Behaviour;
import games.stendhal.server.entity.player.Player;

import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Stack;

<span class="fc" id="L41">public class Blackjack extends AbstractQuest {</span>
	// spades ♠
	 private static final String SPADES = &quot;\u2660&quot;;

	// hearts ♥
	private static final String HEARTS = &quot;\u2665&quot;;

	// diamonds ♦
	private static final String DIAMONDS = &quot;\u2666&quot;;

	// clubs ♣
	private static final String CLUBS = &quot;\u2663&quot;;
	
	private static final int CHAT_TIMEOUT = 60;

	private static final int MIN_STAKE = 10;

	private static final int MAX_STAKE = 400;

	private int stake;

	private boolean bankStands;

	private boolean playerStands;

	private Map&lt;String, Integer&gt; cardValues;

	private Stack&lt;String&gt; deck;

<span class="fc" id="L70">	private final List&lt;String&gt; playerCards = new LinkedList&lt;String&gt;();</span>

<span class="fc" id="L72">	private final List&lt;String&gt; bankCards = new LinkedList&lt;String&gt;();</span>

	private StackableItem playerCardsItem;

	private StackableItem bankCardsItem;

	private SpeakerNPC ramon;

<span class="fc" id="L80">	private final StendhalRPZone zone = SingletonRepository.getRPWorld().getZone(</span>
			&quot;-1_athor_ship_w2&quot;);

	private void startNewGame(final Player player) {
<span class="nc" id="L84">		cleanUpTable();</span>
<span class="nc" id="L85">		playerCards.clear();</span>
<span class="nc" id="L86">		bankCards.clear();</span>
<span class="nc" id="L87">		playerCardsItem = (StackableItem) SingletonRepository.getEntityManager().getItem(&quot;cards&quot;);</span>
<span class="nc" id="L88">		zone.add(playerCardsItem);</span>
<span class="nc" id="L89">		playerCardsItem.setPosition(25, 38);</span>
<span class="nc" id="L90">		bankCardsItem = (StackableItem) SingletonRepository.getEntityManager().getItem(&quot;cards&quot;);</span>
<span class="nc" id="L91">		bankCardsItem.setPosition(27, 38);</span>
<span class="nc" id="L92">		zone.add(bankCardsItem);</span>

<span class="nc" id="L94">		playerStands = false;</span>
<span class="nc" id="L95">		bankStands = false;</span>
		// Before each game, we put all cards back on the deck and
		// shuffle it.
		// We could change that later so that the player can
		// try to remember what's still on the deck
<span class="nc" id="L100">		deck = new Stack&lt;String&gt;();</span>
<span class="nc bnc" id="L101" title="All 2 branches missed.">		for (final String card : cardValues.keySet()) {</span>
<span class="nc" id="L102">			deck.add(card);</span>
<span class="nc" id="L103">		}</span>
<span class="nc" id="L104">		Collections.shuffle(deck);</span>

<span class="nc" id="L106">		dealCards(player, 2);</span>
<span class="nc" id="L107">	}</span>

	private void cleanUpTable() {
<span class="nc bnc" id="L110" title="All 2 branches missed.">		if (playerCardsItem != null) {</span>
<span class="nc" id="L111">			zone.remove(playerCardsItem);</span>
<span class="nc" id="L112">			playerCardsItem = null;</span>
		}
<span class="nc bnc" id="L114" title="All 2 branches missed.">		if (bankCardsItem != null) {</span>
<span class="nc" id="L115">			zone.remove(bankCardsItem);</span>
<span class="nc" id="L116">			bankCardsItem = null;</span>
		}
<span class="nc" id="L118">	}</span>

	private int countAces(final List&lt;String&gt; cards) {
<span class="nc" id="L121">		int count = 0;</span>
<span class="nc bnc" id="L122" title="All 2 branches missed.">		for (final String card : cards) {</span>
<span class="nc bnc" id="L123" title="All 2 branches missed.">			if (card.startsWith(&quot;A&quot;)) {</span>
<span class="nc" id="L124">				count++;</span>
			}
<span class="nc" id="L126">		}</span>
<span class="nc" id="L127">		return count;</span>
	}

	private int sumValues(final List&lt;String&gt; cards) {
<span class="nc" id="L131">		int sum = 0;</span>
<span class="nc bnc" id="L132" title="All 2 branches missed.">		for (final String card : cards) {</span>
<span class="nc" id="L133">			sum += cardValues.get(card).intValue();</span>
<span class="nc" id="L134">		}</span>
<span class="nc" id="L135">		int numberOfAces = countAces(cards);</span>
<span class="nc bnc" id="L136" title="All 4 branches missed.">		while ((sum &gt; 21) &amp;&amp; (numberOfAces &gt; 0)) {</span>
<span class="nc" id="L137">			sum -= 10;</span>
<span class="nc" id="L138">			numberOfAces--;</span>
		}
<span class="nc" id="L140">		return sum;</span>
	}

	private boolean isBlackjack(final List&lt;String&gt; cards) {
<span class="nc bnc" id="L144" title="All 4 branches missed.">		return (sumValues(cards) == 21) &amp;&amp; (cards.size() == 2);</span>
	}

	/**
	 * Deals &lt;i&gt;number&lt;/i&gt; cards to the player, if the player is not standing,
	 * and to the bank, if the bank is not standing.
	 * @param rpEntity 
	 *
	 * @param number
	 *            The number of cards that each player should draw.
	 */
	private void dealCards(final RPEntity rpEntity, final int number) {
<span class="nc" id="L156">		StringBuilder messagebuf = new StringBuilder();</span>
<span class="nc" id="L157">		messagebuf.append('\n');</span>
<span class="nc" id="L158">		int playerSum = sumValues(playerCards);</span>
<span class="nc" id="L159">		int bankSum = sumValues(bankCards);</span>
<span class="nc bnc" id="L160" title="All 2 branches missed.">		for (int i = 0; i &lt; number; i++) {</span>
<span class="nc bnc" id="L161" title="All 2 branches missed.">			if (!playerStands) {</span>
<span class="nc" id="L162">				final String playerCard = deck.pop();</span>
<span class="nc" id="L163">				playerCards.add(playerCard);</span>
<span class="nc" id="L164">				messagebuf.append(&quot;You got a &quot; + playerCard + &quot;.\n&quot;);</span>
			}

<span class="nc bnc" id="L167" title="All 4 branches missed.">			if (playerStands &amp;&amp; (playerSum &lt; bankSum)) {</span>
<span class="nc" id="L168">				messagebuf.append(&quot;The bank stands.\n&quot;);</span>
<span class="nc" id="L169">				bankStands = true;</span>
			}
<span class="nc bnc" id="L171" title="All 2 branches missed.">			if (!bankStands) {</span>
<span class="nc" id="L172">				final String bankCard = deck.pop();</span>
<span class="nc" id="L173">				bankCards.add(bankCard);</span>
<span class="nc" id="L174">				messagebuf.append(&quot;The bank got a &quot; + bankCard + &quot;.\n&quot;);</span>
			}
<span class="nc" id="L176">			playerSum = sumValues(playerCards);</span>
<span class="nc" id="L177">			bankSum = sumValues(bankCards);</span>
		}
<span class="nc" id="L179">		playerCardsItem.setQuantity(playerSum);</span>
<span class="nc" id="L180">		playerCardsItem.setDescription(&quot;You see the player's cards: &quot;</span>
				+ Grammar.enumerateCollection(playerCards));
<span class="nc" id="L182">		playerCardsItem.notifyWorldAboutChanges();</span>
<span class="nc" id="L183">		bankCardsItem.setQuantity(bankSum);</span>
<span class="nc" id="L184">		bankCardsItem.setDescription(&quot;You see the bank's cards: &quot;</span>
				+ Grammar.enumerateCollection(bankCards));
<span class="nc" id="L186">		bankCardsItem.notifyWorldAboutChanges();</span>
<span class="nc bnc" id="L187" title="All 2 branches missed.">		if (!playerStands) {</span>
<span class="nc" id="L188">			messagebuf.append(&quot;You have &quot; + playerSum + &quot;.\n&quot;);</span>
<span class="nc bnc" id="L189" title="All 2 branches missed.">			if (playerSum == 21) {</span>
<span class="nc" id="L190">				playerStands = true;</span>
			}
		}
<span class="nc bnc" id="L193" title="All 2 branches missed.">		if (!bankStands) {</span>
<span class="nc" id="L194">			messagebuf.append(&quot;The bank has &quot; + bankSum + &quot;.\n&quot;);</span>
<span class="nc bnc" id="L195" title="All 6 branches missed.">			if ((bankSum &gt;= 17) &amp;&amp; (bankSum &lt;= 21) &amp;&amp; (bankSum &gt;= playerSum)) {</span>
<span class="nc" id="L196">				bankStands = true;</span>
<span class="nc" id="L197">				messagebuf.append(&quot;The bank stands.\n&quot;);</span>
			}
		}
<span class="nc" id="L200">		final String message2 = analyze(rpEntity);</span>
<span class="nc bnc" id="L201" title="All 2 branches missed.">		if (message2 != null) {</span>
<span class="nc" id="L202">			messagebuf.append(message2);</span>
		}
<span class="nc" id="L204">		ramon.say(messagebuf.toString());</span>
<span class="nc" id="L205">	}</span>

	/**
	 * @param rpEntity 
	 * @return The text that the dealer should say, or null if he shouldn't say
	 *         anything.
	 */
	private String analyze(final RPEntity rpEntity) {
<span class="nc" id="L213">		final int playerSum = sumValues(playerCards);</span>
<span class="nc" id="L214">		final int bankSum = sumValues(bankCards);</span>
<span class="nc" id="L215">		String message = null;</span>
<span class="nc bnc" id="L216" title="All 4 branches missed.">		if (isBlackjack(bankCards) &amp;&amp; isBlackjack(playerCards)) {</span>
<span class="nc" id="L217">			message = &quot;You have a blackjack, but the bank has one too. It's a push. &quot;;</span>
<span class="nc" id="L218">			message += payOff(rpEntity, 1);</span>
<span class="nc bnc" id="L219" title="All 2 branches missed.">		} else if (isBlackjack(bankCards)) {</span>
<span class="nc" id="L220">			message = &quot;The bank has a blackjack. Better luck next time!&quot;;</span>
<span class="nc bnc" id="L221" title="All 2 branches missed.">		} else if (isBlackjack(playerCards)) {</span>
<span class="nc" id="L222">			message = &quot;You have a blackjack! Congratulations! &quot;;</span>
<span class="nc" id="L223">			message += payOff(rpEntity, 3);</span>
<span class="nc bnc" id="L224" title="All 2 branches missed.">		} else if (playerSum &gt; 21) {</span>
<span class="nc bnc" id="L225" title="All 2 branches missed.">			if (bankSum &gt; 21) {</span>
<span class="nc" id="L226">				message = &quot;Both have busted! This is a draw. &quot;;</span>
<span class="nc" id="L227">				message += payOff(rpEntity, 1);</span>
			} else {
<span class="nc" id="L229">				message = &quot;You have busted! Better luck next time!&quot;;</span>
			}
<span class="nc bnc" id="L231" title="All 2 branches missed.">		} else if (bankSum &gt; 21) {</span>
<span class="nc" id="L232">			message = &quot;The bank has busted! Congratulations! &quot;;</span>
<span class="nc" id="L233">			message += payOff(rpEntity, 2);</span>
		} else {
<span class="nc bnc" id="L235" title="All 2 branches missed.">			if (!playerStands) {</span>
<span class="nc" id="L236">				message = &quot;Do you want another card?&quot;;</span>
<span class="nc" id="L237">				ramon.setCurrentState(ConversationStates.QUESTION_1);</span>
<span class="nc bnc" id="L238" title="All 2 branches missed.">			} else if (!bankStands) {</span>
<span class="nc" id="L239">				letBankDrawAfterPause(ramon.getAttending().getName());</span>
<span class="nc bnc" id="L240" title="All 2 branches missed.">			} else if (bankSum &gt; playerSum) {</span>
<span class="nc" id="L241">				message = &quot;The bank has won. Better luck next time!&quot;;</span>
<span class="nc bnc" id="L242" title="All 2 branches missed.">			} else if (bankSum == playerSum) {</span>
<span class="nc" id="L243">				message = &quot;This is a draw. &quot;;</span>
<span class="nc" id="L244">				message += payOff(rpEntity, 1);</span>
			} else {
<span class="nc" id="L246">				message = &quot;You have won. Congratulations! &quot;;</span>
<span class="nc" id="L247">				message += payOff(rpEntity, 2);</span>
			}
		}
<span class="nc" id="L250">		return message;</span>
	}

	private void letBankDrawAfterPause(final String playerName) {
<span class="nc" id="L254">		SingletonRepository.getTurnNotifier().notifyInSeconds(1, new TurnListener() {</span>
<span class="nc" id="L255">			private final String name = playerName;</span>

			@Override
			public void onTurnReached(final int currentTurn) {
<span class="nc bnc" id="L259" title="All 2 branches missed.">				if (name.equals(ramon.getAttending().getName())) {</span>
<span class="nc" id="L260">					dealCards(ramon.getAttending(), 1);</span>
				}

<span class="nc" id="L263">			}</span>

		});
<span class="nc" id="L266">	}</span>

	/**
	 * Gives the player &lt;i&gt;factor&lt;/i&gt; times his stake.
	 *
	 * @param rpEntity
	 *            The player.
	 * @param factor
	 *            The multiplier. 1 for draw, 2 for win, 3 for win with
	 *            blackjack.
	 * @return A message that the NPC should say to inform the player.
	 */
	private String payOff(final RPEntity rpEntity, final int factor) {
<span class="nc" id="L279">		final StackableItem money = (StackableItem) SingletonRepository.getEntityManager().getItem(&quot;money&quot;);</span>
<span class="nc" id="L280">		money.setQuantity(factor * stake);</span>
<span class="nc" id="L281">		rpEntity.equipOrPutOnGround(money);</span>
<span class="nc bnc" id="L282" title="All 2 branches missed.">		if (factor == 1) {</span>
<span class="nc" id="L283">			return &quot;You get your stake back.&quot;;</span>
		} else {
<span class="nc" id="L285">			return &quot;Here's your stake, plus &quot; + (factor - 1) * stake</span>
					+ &quot; pieces of gold.&quot;;
		}
	}

	@Override
	// @SuppressWarnings(&quot;unchecked&quot;)
	public void addToWorld() {

		// TODO: move ramon into his own NPC file.
<span class="fc" id="L295">		ramon = new SpeakerNPC(&quot;Ramon&quot;) {</span>
			@Override
			protected void createPath() {
				// Ramon doesn't move
<span class="fc" id="L299">				setPath(null);</span>
<span class="fc" id="L300">			}</span>

			@Override
			protected void createDialog() {

<span class="fc" id="L305">				addGreeting(&quot;Welcome to the #blackjack table! You can #play here to kill time until the ferry arrives.&quot;);</span>
<span class="fc" id="L306">				addJob(&quot;I was a card dealer in the Semos tavern, but I lost my gambling license. But my brother Ricardo is still working in the tavern.&quot;);</span>
<span class="fc" id="L307">				addReply(</span>
						&quot;blackjack&quot;,
						&quot;Blackjack is a simple card game. You can read the rules at the blackboard at the wall.&quot;);
<span class="fc" id="L310">				addHelp(&quot;Don't get too distracted playing cards to leave this ferry! Listen out for announcements.&quot;);</span>
<span class="fc" id="L311">				addGoodbye(&quot;Goodbye!&quot;);</span>
<span class="fc" id="L312">			}</span>

			@Override
			protected void onGoodbye(final RPEntity player) {
				// remove the cards when the player stops playing.
<span class="nc" id="L317">				cleanUpTable();</span>
<span class="nc" id="L318">			}</span>
		};

<span class="fc" id="L321">		ramon.setEntityClass(&quot;naughtyteen2npc&quot;);</span>
<span class="fc" id="L322">		ramon.setPosition(26, 36);</span>
<span class="fc" id="L323">		ramon.setDescription(&quot;Ramon wants to play some rounds of blackjack with you. Do you want to give it a try?&quot;);</span>
<span class="fc" id="L324">		ramon.setDirection(Direction.DOWN);</span>
<span class="fc" id="L325">		ramon.initHP(100);</span>
<span class="fc" id="L326">		zone.add(ramon);</span>

<span class="fc" id="L328">		cardValues = new HashMap&lt;String, Integer&gt;();</span>
<span class="fc" id="L329">		final String[] colors = { CLUBS, </span>
				DIAMONDS, 
				HEARTS,
				SPADES }; 
<span class="fc" id="L333">		final String[] pictures = { &quot;J&quot;, &quot;Q&quot;, &quot;K&quot; };</span>
<span class="fc bfc" id="L334" title="All 2 branches covered.">		for (final String color : colors) {</span>
<span class="fc bfc" id="L335" title="All 2 branches covered.">			for (int i = 2; i &lt;= 10; i++) {</span>
<span class="fc" id="L336">				cardValues.put(i + color, Integer.valueOf(i));</span>
			}
<span class="fc bfc" id="L338" title="All 2 branches covered.">			for (final String picture : pictures) {</span>
<span class="fc" id="L339">				cardValues.put(picture + color, Integer.valueOf(10));</span>
			}
			// ace values can change to 1 during the game
<span class="fc" id="L342">			cardValues.put(&quot;A&quot; + color, Integer.valueOf(11));</span>
		}

		// increase the timeout, as otherwise the player often
		// would use their stake because of reacting too slow.
		
<span class="fc" id="L348">		ramon.setPlayerChatTimeout(CHAT_TIMEOUT); </span>

<span class="fc" id="L350">		ramon.add(ConversationStates.ATTENDING, &quot;play&quot;, null,</span>
				ConversationStates.ATTENDING,
				&quot;In order to play, you have to at least #'stake &quot; + MIN_STAKE
						+ &quot;' and at most #'stake &quot; + MAX_STAKE
						+ &quot;' pieces of gold. So, how much will you risk?&quot;, null);

<span class="fc" id="L356">		ramon.add(ConversationStates.ATTENDING, &quot;stake&quot;, null,</span>
				ConversationStates.ATTENDING, null,
<span class="fc" id="L358">				new BehaviourAction(new Behaviour(), &quot;stake&quot;, &quot;offer&quot;) {</span>
					@Override
					public void fireSentenceError(Player player, Sentence sentence, EventRaiser npc) {
<span class="nc" id="L361">			        	npc.say(sentence.getErrorString() + &quot; Just tell me how much you want to risk, for example #'stake 50'.&quot;);</span>
<span class="nc" id="L362">					}</span>

					@Override
					public void fire(final Player player, final Sentence sentence, final EventRaiser npc) {
<span class="nc bnc" id="L366" title="All 2 branches missed.">						if (sentence.hasError()) {</span>
<span class="nc" id="L367">							fireSentenceError(player, sentence, npc);</span>
						} else {
<span class="nc" id="L369">							ItemParserResult res = behaviour.parse(sentence);</span>

							// don't use res.wasFound() and avoid to call fireRequestError()
<span class="nc" id="L372">							fireRequestOK(res, player, sentence, npc);</span>
						}
<span class="nc" id="L374">					}</span>

					@Override
					public void fireRequestOK(final ItemParserResult res, Player player, Sentence sentence, EventRaiser npc) {
<span class="nc" id="L378">						stake = res.getAmount();</span>

<span class="nc bnc" id="L380" title="All 2 branches missed.">						if (stake &lt; MIN_STAKE) {</span>
<span class="nc" id="L381">							npc.say(&quot;You must stake at least &quot; + MIN_STAKE + &quot; pieces of gold.&quot;);</span>
<span class="nc bnc" id="L382" title="All 2 branches missed.">						} else if (stake &gt; MAX_STAKE) {</span>
<span class="nc" id="L383">							npc.say(&quot;You can't stake more than &quot; + MAX_STAKE + &quot; pieces of gold.&quot;);</span>
<span class="nc bnc" id="L384" title="All 2 branches missed.">						} else if (player.drop(&quot;money&quot;, stake)) {</span>
<span class="nc" id="L385">							startNewGame(player);</span>
						} else {
<span class="nc" id="L387">							npc.say(&quot;Hey! You don't have enough money!&quot;);</span>
						}
<span class="nc" id="L389">					}</span>
				});

<span class="fc" id="L392">		ramon.add(ConversationStates.QUESTION_1,</span>
				ConversationPhrases.YES_MESSAGES, null,
<span class="fc" id="L394">				ConversationStates.ATTENDING, null, new ChatAction() {</span>
					@Override
					public void fire(final Player player, final Sentence sentence, final EventRaiser npc) {
<span class="nc" id="L397">						dealCards(player, 1);</span>
<span class="nc" id="L398">					}</span>
				});

		// The player says he doesn't want to have another card.
		// Let the dealer give cards to the bank.
<span class="fc" id="L403">		ramon.add(ConversationStates.QUESTION_1,</span>
				ConversationPhrases.NO_MESSAGES, null,
<span class="fc" id="L405">				ConversationStates.ATTENDING, null, new ChatAction() {</span>
					@Override
					public void fire(final Player player, final Sentence sentence, final EventRaiser npc) {
<span class="nc" id="L408">						playerStands = true;</span>
<span class="nc bnc" id="L409" title="All 2 branches missed.">						if (bankStands) {</span>
							// Both stand. Let the dealer tell the final resul
<span class="nc" id="L411">							final String message = analyze(player);</span>
<span class="nc bnc" id="L412" title="All 2 branches missed.">							if (message != null) {</span>
<span class="nc" id="L413">								ramon.say(message);</span>
							}
<span class="nc" id="L415">						} else {</span>
<span class="nc" id="L416">							letBankDrawAfterPause(player.getName());</span>
						}
<span class="nc" id="L418">					}</span>
				});
		
<span class="fc" id="L421">		fillQuestInfo(</span>
				&quot;Blackjack&quot;,
				&quot;While away your time on Athor Ferry with a challenging game of Blackjack.&quot;,
				true);
<span class="fc" id="L425">	}</span>

	@Override
	public String getSlotName() {
<span class="nc" id="L429">		return &quot;blackjack&quot;;</span>
	}

	@Override
	public String getName() {
<span class="nc" id="L434">		return &quot;Blackjack&quot;;</span>
	}
	
	@Override
	public int getMinLevel() {
<span class="fc" id="L439">		return 0;</span>
	}
	
	@Override
	public boolean isVisibleOnQuestStatus() {
<span class="nc" id="L444">		return false;</span>
	}
	
	@Override
	public List&lt;String&gt; getHistory(final Player player) {
<span class="nc" id="L449">		return new ArrayList&lt;String&gt;();</span>
	}
	
	@Override
	public String getNPCName() {
<span class="nc" id="L454">		return &quot;Ramon&quot;;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>