<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ProductionAchievementFactory.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">stendhal</a> &gt; <a href="index.source.html" class="el_package">games.stendhal.server.core.rp.achievement.factory</a> &gt; <span class="el_source">ProductionAchievementFactory.java</span></div><h1>ProductionAchievementFactory.java</h1><pre class="source lang-java linenums">/***************************************************************************
 *                   (C) Copyright 2003-2011 - Stendhal                    *
 ***************************************************************************
 ***************************************************************************
 *                                                                         *
 *   This program is free software; you can redistribute it and/or modify  *
 *   it under the terms of the GNU General Public License as published by  *
 *   the Free Software Foundation; either version 2 of the License, or     *
 *   (at your option) any later version.                                   *
 *                                                                         *
 ***************************************************************************/
package games.stendhal.server.core.rp.achievement.factory;

import games.stendhal.server.core.engine.SingletonRepository;
import games.stendhal.server.core.rp.achievement.Achievement;
import games.stendhal.server.core.rp.achievement.Category;
import games.stendhal.server.entity.npc.behaviour.journal.ProducerRegister;
import games.stendhal.server.entity.npc.condition.AndCondition;
import games.stendhal.server.entity.npc.condition.PlayerProducedNumberOfItemsCondition;
import games.stendhal.server.entity.npc.condition.QuestCompletedCondition;
import games.stendhal.server.entity.npc.condition.QuestStateStartsWithCondition;

import java.util.Collection;
import java.util.LinkedList;
import java.util.List;
/**
 * Factory for production achievements
 *
 * @author kymara
 */
<span class="nc" id="L31">public class ProductionAchievementFactory extends AbstractAchievementFactory {</span>

	@Override
	public Collection&lt;Achievement&gt; createAchievements() {
<span class="nc" id="L35">		List&lt;Achievement&gt; achievements = new LinkedList&lt;Achievement&gt;();</span>

<span class="nc" id="L37">		final ProducerRegister producerRegister = SingletonRepository.getProducerRegister();</span>

<span class="nc" id="L39">	    final List&lt;String&gt; foodlist = producerRegister.getProducedItemNames(&quot;food&quot;);</span>
<span class="nc" id="L40">		final String[] foods = foodlist.toArray(new String[foodlist.size()]);</span>
		// may wish to remove mega potion by hand?

		// this includes a lot of foods! at time of writing, this is at least:
		// pie, cheese sausage, sausage, fish pie, apple pie, cherry pie, crepes suzette, sandwich, bread, pizza
		// grilled steak is made using quest code and not production code so we add an extra condition, and it doesn't adhere to standard completion guidelines
<span class="nc" id="L46">		achievements.add(createAchievement(&quot;production.class.food&quot;, &quot;Gourmet&quot;, &quot;Order all food types available from Faiumoni's cooks&quot;,</span>
				Achievement.MEDIUM_BASE_SCORE, true,
				new AndCondition(
						new PlayerProducedNumberOfItemsCondition(1, foods),
						new QuestStateStartsWithCondition(&quot;coal_for_haunchy&quot;,&quot;waiting;&quot;))));


<span class="nc" id="L53">	    final List&lt;String&gt; drinklist = producerRegister.getProducedItemNames(&quot;drink&quot;);</span>
<span class="nc" id="L54">		final String[] drinks = drinklist.toArray(new String[drinklist.size()]);</span>

		// soups and koboldish torcibud are made using quest code so we add extra conditions for those
		// at time of writing, the other drinks are fierywater, tea, pina colada, and mega potion (which we may remove)
<span class="nc" id="L58">		achievements.add(createAchievement(&quot;production.class.drink&quot;, &quot;Thirsty Worker&quot;, &quot;Order all drink types available from Faiumoni's cooks&quot;,</span>
				Achievement.MEDIUM_BASE_SCORE, true,
				new AndCondition(
						new PlayerProducedNumberOfItemsCondition(1, drinks),
						new QuestCompletedCondition(&quot;soup_maker&quot;),
						new QuestCompletedCondition(&quot;fishsoup_maker&quot;),
						new QuestCompletedCondition(&quot;koboldish_torcibud&quot;))));


<span class="nc" id="L67">	    final List&lt;String&gt; resourcelist = producerRegister.getProducedItemNames(&quot;resource&quot;);</span>
<span class="nc" id="L68">		final String[] resources = resourcelist.toArray(new String[resourcelist.size()]);</span>
		// at time of writing: gold bar, mithril bar, flour, iron
<span class="nc" id="L70">		achievements.add(createAchievement(&quot;production.class.resource&quot;, &quot;Alchemist&quot;, &quot;Produce 5 of each kind of precious metal and resource&quot;,</span>
				Achievement.HARD_BASE_SCORE, true,
				new PlayerProducedNumberOfItemsCondition(5, resources)));

<span class="nc" id="L74">		achievements.add(createAchievement(&quot;production.flour.1000&quot;, &quot;Jenny's Assistant&quot;, &quot;Produce 1000 flour&quot;,</span>
				Achievement.EASY_BASE_SCORE, true,
				new PlayerProducedNumberOfItemsCondition(1000, &quot;flour&quot;)));

<span class="nc" id="L78">		return achievements;</span>
	}

	@Override
	protected Category getCategory() {
<span class="nc" id="L83">		return Category.PRODUCTION;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>