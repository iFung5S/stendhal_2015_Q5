<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>PlayerRPClass.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">stendhal</a> &gt; <a href="index.source.html" class="el_package">games.stendhal.server.entity.player</a> &gt; <span class="el_source">PlayerRPClass.java</span></div><h1>PlayerRPClass.java</h1><pre class="source lang-java linenums">/* $Id$ */
/***************************************************************************
 *                      (C) Copyright 2003 - Marauroa                      *
 ***************************************************************************
 ***************************************************************************
 *                                                                         *
 *   This program is free software; you can redistribute it and/or modify  *
 *   it under the terms of the GNU General Public License as published by  *
 *   the Free Software Foundation; either version 2 of the License, or     *
 *   (at your option) any later version.                                   *
 *                                                                         *
 ***************************************************************************/
package games.stendhal.server.entity.player;

import static games.stendhal.common.constants.Actions.AUTOWALK;
import games.stendhal.common.constants.Events;
import marauroa.common.game.Definition;
import marauroa.common.game.Definition.Type;
import marauroa.common.game.RPClass;

/**
 * Handles the RPClass registration.
 */
<span class="nc" id="L24">public class PlayerRPClass {</span>

	/**
	 * Generates the RPClass and specifies slots and attributes.
	 */
	static void generateRPClass() {
<span class="fc" id="L30">		final RPClass player = new RPClass(&quot;player&quot;);</span>
<span class="fc" id="L31">		player.isA(&quot;rpentity&quot;);</span>

		// Note: text and private_text need to be kept because volatile
		//       attributes have been stored to the database in the past.
		//       And old characters, who logged out in the same turn as a
		//       private_text was set, cannot be loaded without this definition.
<span class="fc" id="L37">		player.addAttribute(&quot;text&quot;, Type.LONG_STRING, Definition.VOLATILE);</span>
//		player.addAttribute(&quot;private_text&quot;, Type.LONG_STRING, (byte) (Definition.HIDDEN | Definition.VOLATILE));

<span class="fc" id="L40">		player.addRPEvent(Events.PRIVATE_TEXT, Definition.PRIVATE);</span>
<span class="fc" id="L41">		player.addRPEvent(Events.PLAYER_LOGGED_ON, Definition.PRIVATE);</span>
<span class="fc" id="L42">		player.addRPEvent(Events.PLAYER_LOGGED_OUT, Definition.PRIVATE);</span>
<span class="fc" id="L43">		player.addRPEvent(Events.TRADE_STATE_CHANGE, Definition.PRIVATE);</span>
<span class="fc" id="L44">		player.addRPEvent(Events.REACHED_ACHIEVEMENT, Definition.PRIVATE);</span>

<span class="fc" id="L46">		player.addAttribute(&quot;dead&quot;, Type.FLAG, Definition.PRIVATE);</span>

<span class="fc" id="L48">		player.addAttribute(&quot;outfit&quot;, Type.INT);</span>
<span class="fc" id="L49">		player.addAttribute(&quot;outfit_org&quot;, Type.INT, Definition.HIDDEN);</span>
<span class="fc" id="L50">		player.addAttribute(&quot;outfit_colors&quot;, Type.MAP);</span>
<span class="fc" id="L51">		player.addAttribute(&quot;outfit_expire_age&quot;, Type.INT, Definition.HIDDEN);</span>

<span class="fc" id="L53">		player.addAttribute(&quot;away&quot;, Type.LONG_STRING, Definition.VOLATILE);</span>
<span class="fc" id="L54">		player.addAttribute(&quot;grumpy&quot;, Type.LONG_STRING, Definition.VOLATILE);</span>

<span class="fc" id="L56">		player.addAttribute(AUTOWALK, Type.STRING, Definition.VOLATILE);</span>

		// Use this for admin menus and usage.
<span class="fc" id="L59">		player.addAttribute(&quot;admin&quot;, Type.FLAG);</span>
<span class="fc" id="L60">		player.addAttribute(&quot;adminlevel&quot;, Type.INT);</span>
<span class="fc" id="L61">		player.addAttribute(&quot;invisible&quot;, Type.FLAG, Definition.HIDDEN);</span>
<span class="fc" id="L62">		player.addAttribute(&quot;ghostmode&quot;, Type.FLAG);</span>
<span class="fc" id="L63">		player.addAttribute(&quot;teleclickmode&quot;, Type.FLAG, Definition.HIDDEN);</span>

<span class="fc" id="L65">		player.addAttribute(&quot;release&quot;, Type.STRING, Definition.PRIVATE);</span>

<span class="fc" id="L67">		player.addAttribute(&quot;age&quot;, Type.INT, Definition.HIDDEN);</span>

		// Store sheep at DB
<span class="fc" id="L70">		player.addRPSlot(&quot;#flock&quot;, 1, Definition.HIDDEN);</span>
<span class="fc" id="L71">		player.addAttribute(&quot;sheep&quot;, Type.INT);</span>

		// Store pets at DB
<span class="fc" id="L74">		player.addRPSlot(&quot;#pets&quot;, 1, Definition.HIDDEN);</span>
<span class="fc" id="L75">		player.addAttribute(&quot;pet&quot;, Type.INT);</span>
<span class="fc" id="L76">		player.addAttribute(&quot;cat&quot;, Type.INT);</span>
<span class="fc" id="L77">		player.addAttribute(&quot;baby_dragon&quot;, Type.INT);</span>
<span class="fc" id="L78">		player.addAttribute(&quot;purple_dragon&quot;, Type.INT);</span>

		// Bank system
<span class="fc" id="L81">		player.addRPSlot(&quot;bank&quot;, 30, Definition.HIDDEN);</span>
<span class="fc" id="L82">		player.addRPSlot(&quot;bank_ados&quot;, 30, Definition.HIDDEN);</span>
<span class="fc" id="L83">		player.addRPSlot(&quot;zaras_chest_ados&quot;, 30, Definition.HIDDEN);</span>
<span class="fc" id="L84">		player.addRPSlot(&quot;bank_fado&quot;, 30, Definition.HIDDEN);</span>
<span class="fc" id="L85">		player.addRPSlot(&quot;bank_nalwor&quot;, 30, Definition.HIDDEN);</span>

		// Kills recorder - needed for quest
<span class="fc" id="L88">		player.addRPSlot(&quot;!kills&quot;, 1, Definition.HIDDEN);</span>

		// Count looted items
<span class="fc" id="L91">		player.addAttribute(&quot;looted_items&quot;, Type.MAP, Definition.HIDDEN);</span>

		// We use this for the buddy system
<span class="fc" id="L94">		player.addRPSlot(&quot;!buddy&quot;, 1, Definition.PRIVATE);</span>
		// using additionally a proof of concept for buddies here
<span class="fc" id="L96">		player.addAttribute(&quot;buddies&quot;, Type.MAP, Definition.PRIVATE);</span>

<span class="fc" id="L98">		player.addRPSlot(&quot;!ignore&quot;, 1, Definition.PRIVATE);</span>
<span class="fc" id="L99">		player.addAttribute(&quot;online&quot;, Type.LONG_STRING,</span>
				(byte) (Definition.PRIVATE | Definition.VOLATILE));
<span class="fc" id="L101">		player.addAttribute(&quot;offline&quot;, Type.LONG_STRING,</span>
				(byte) (Definition.PRIVATE | Definition.VOLATILE));

<span class="fc" id="L104">		player.addRPSlot(&quot;!quests&quot;, 1, Definition.HIDDEN);</span>
<span class="fc" id="L105">		player.addRPSlot(&quot;!tutorial&quot;, 1, Definition.HIDDEN);</span>

<span class="fc" id="L107">		player.addAttribute(&quot;karma&quot;, Type.FLOAT, Definition.PRIVATE);</span>
<span class="fc" id="L108">		player.addAttribute(&quot;tradescore&quot;, Type.INT, Definition.PRIVATE);</span>
<span class="fc" id="L109">		player.addAttribute(&quot;sentence&quot;, Type.STRING, Definition.HIDDEN);</span>

<span class="fc" id="L111">		player.addRPSlot(&quot;skills&quot;, 1, Definition.HIDDEN);</span>

		// Non-removable while stored ones have values
<span class="fc" id="L114">		player.addRPSlot(&quot;!skills&quot;, 1,</span>
				(byte) (Definition.HIDDEN | Definition.VOLATILE));

<span class="fc" id="L117">		player.addRPSlot(&quot;!visited&quot;, 1, Definition.HIDDEN);</span>

		// This is the RPSlot for the spells. It's main purpose is to let us add
		// a GUI for the spells later on.
<span class="fc" id="L121">		player.addRPSlot(&quot;spells&quot;, 9, Definition.PRIVATE);</span>

<span class="fc" id="L123">		player.addRPSlot(&quot;trade&quot;, 4);</span>

		// The guild name
<span class="fc" id="L126">		player.addAttribute(&quot;guild&quot;, Type.STRING);</span>

		// Player features
<span class="fc" id="L129">		player.addAttribute(&quot;features&quot;, Type.MAP, Definition.PRIVATE);</span>
		// deprecated
<span class="fc" id="L131">		player.addRPSlot(&quot;!features&quot;, 1, Definition.PRIVATE);</span>

		// Last time this player attacked another player
<span class="fc" id="L134">		player.addAttribute(&quot;last_pvp_action_time&quot;, Type.FLOAT, Definition.HIDDEN);</span>
<span class="fc" id="L135">		player.addAttribute(&quot;last_player_kill_time&quot;, Type.FLOAT, Definition.STANDARD);</span>

<span class="fc" id="L137">		player.addRPEvent(&quot;transition_graph&quot;, Definition.PRIVATE);</span>
<span class="fc" id="L138">		player.addRPEvent(&quot;examine&quot;, Definition.PRIVATE);</span>
<span class="fc" id="L139">		player.addRPEvent(&quot;show_item_list&quot;, Definition.PRIVATE);</span>
<span class="fc" id="L140">		player.addRPEvent(Events.VIEW_CHANGE, Definition.PRIVATE);</span>
<span class="fc" id="L141">		player.addRPEvent(Events.GROUP_CHANGE, Definition.PRIVATE);</span>
<span class="fc" id="L142">		player.addRPEvent(Events.GROUP_INVITE, Definition.PRIVATE);</span>
<span class="fc" id="L143">		player.addRPEvent(Events.PROGRESS_STATUS_CHANGE, Definition.PRIVATE);</span>
<span class="fc" id="L144">		player.addRPEvent(Events.GLOBAL_VISUAL, Definition.PRIVATE);</span>

		// Maps
<span class="fc" id="L147">		player.addAttribute(&quot;source_usage&quot;, Type.MAP, Definition.HIDDEN);</span>

		// client menu override
<span class="fc" id="L150">		player.addAttribute(&quot;menu&quot;, Type.STRING, Definition.VOLATILE);</span>
<span class="fc" id="L151">	}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>