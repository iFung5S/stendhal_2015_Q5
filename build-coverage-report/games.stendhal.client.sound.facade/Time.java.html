<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Time.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">stendhal</a> &gt; <a href="index.source.html" class="el_package">games.stendhal.client.sound.facade</a> &gt; <span class="el_source">Time.java</span></div><h1>Time.java</h1><pre class="source lang-java linenums">/* $Id$ */
/***************************************************************************
 *                   (C) Copyright 2003-2010 - Stendhal                    *
 ***************************************************************************
 ***************************************************************************
 *                                                                         *
 *   This program is free software; you can redistribute it and/or modify  *
 *   it under the terms of the GNU General Public License as published by  *
 *   the Free Software Foundation; either version 2 of the License, or     *
 *   (at your option) any later version.                                   *
 *                                                                         *
 ***************************************************************************/
package games.stendhal.client.sound.facade;

/**
 * A time class that helps converting different time units
 * to and from samples per sample rate
 * &lt;p&gt;
 * internally this class will calculate in nanosecond resolution only
 * 
 * @author silvio
 */
public class Time implements Cloneable
{
    /**
     * Enumeration of different time units
     */
<span class="pc" id="L28">    public static enum Unit</span>
    {
<span class="fc" id="L30">        NANO  (1                    ),</span>
<span class="fc" id="L31">        MILLI (NANO.mBase  * 1000000),</span>
<span class="fc" id="L32">        SEC   (MILLI.mBase * 1000   ),</span>
<span class="fc" id="L33">        MIN   (SEC.mBase   * 60     ),</span>
<span class="fc" id="L34">        HOUR  (MIN.mBase   * 60     );</span>

        private final long mBase;

<span class="fc" id="L38">        Unit(long base) { mBase = base; }</span>

        /**
         * @return returns the specific time unit in nano seconds
         */
<span class="fc" id="L43">        public long getNanos() { return mBase; }</span>
    }

    private long mNanoSeconds;

    public Time()
<span class="fc" id="L49">    {</span>
<span class="fc" id="L50">        mNanoSeconds = 0;</span>
<span class="fc" id="L51">    }</span>

	public Time(long nanos)
<span class="nc" id="L54">    {</span>
<span class="nc" id="L55">        mNanoSeconds = nanos;</span>
<span class="nc" id="L56">    }</span>
    
    /**
     * Creates an instance of the Time class
     * from a time value and a time unit
     *
     * @param value the time value
     * @param unit  the time unit (e.g. NANO, MILLI, SEC, ...)
     */
    public Time(long value, Unit unit)
<span class="fc" id="L66">    {</span>
<span class="fc" id="L67">        set(value, unit);</span>
<span class="fc" id="L68">    }</span>

    /**
     * Creates an instance of the Time class
     * from a given number of samples and a sample rate
     *
     * @param samples
     * @param sampleRate
     */
    public Time(long samples, int sampleRate)
<span class="nc" id="L78">    {</span>
<span class="nc" id="L79">        set(samples, sampleRate);</span>
<span class="nc" id="L80">    }</span>

    public final void set(long value, Unit unit)
    {
<span class="fc" id="L84">        mNanoSeconds = value * unit.getNanos();</span>
<span class="fc" id="L85">    }</span>

    public final void set(long samples, int sampleRate)
    {
<span class="nc" id="L89">        mNanoSeconds = (samples * Unit.SEC.getNanos()) / sampleRate;</span>
<span class="nc" id="L90">    }</span>

<span class="fc" id="L92">    public long   getInNanoSeconds () { return mNanoSeconds;                                         }</span>
<span class="nc" id="L93">    public double getInMilliSeconds() { return (double)mNanoSeconds / (double)Unit.MILLI.getNanos(); }</span>
<span class="nc" id="L94">    public double getInSeconds     () { return (double)mNanoSeconds / (double)Unit.SEC.getNanos();   }</span>
<span class="nc" id="L95">    public double getInMinutes     () { return (double)mNanoSeconds / (double)Unit.MIN.getNanos();   }</span>
<span class="nc" id="L96">    public double getInHours       () { return (double)mNanoSeconds / (double)Unit.HOUR.getNanos();  }</span>

<span class="nc" id="L98">	void add(Time time ) { mNanoSeconds += time.mNanoSeconds; }</span>
<span class="nc" id="L99">	void sub(Time time ) { mNanoSeconds -= time.mNanoSeconds; }</span>
<span class="nc" id="L100">	void add(long nanos) { mNanoSeconds += nanos;             }</span>
<span class="nc" id="L101">	void sub(long nanos) { mNanoSeconds -= nanos;             }</span>
	
    /**
     * Calculates the number of samples for a given sample rate
     * that would fit into this time range
     * 
     * @param sampleRate any sample rate
     * @return           number of samples
     */
    public double getInSamples(int sampleRate)
    {
<span class="fc" id="L112">        double seconds = (double)mNanoSeconds / (double)Unit.SEC.getNanos();</span>
<span class="fc" id="L113">        return seconds * sampleRate;</span>
    }
	
	@Override
	public Time clone()
	{
<span class="nc" id="L119">		return new Time(mNanoSeconds);</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>