<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>FishermansDaughterSellingNPC.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">stendhal</a> &gt; <a href="index.source.html" class="el_package">games.stendhal.server.maps.quests.revivalweeks</a> &gt; <span class="el_source">FishermansDaughterSellingNPC.java</span></div><h1>FishermansDaughterSellingNPC.java</h1><pre class="source lang-java linenums">/* $Id$ */
/***************************************************************************
 *                   (C) Copyright 2003-2010 - Stendhal                    *
 ***************************************************************************
 ***************************************************************************
 *                                                                         *
 *   This program is free software; you can redistribute it and/or modify  *
 *   it under the terms of the GNU General Public License as published by  *
 *   the Free Software Foundation; either version 2 of the License, or     *
 *   (at your option) any later version.                                   *
 *                                                                         *
 ***************************************************************************/
package games.stendhal.server.maps.quests.revivalweeks;

import java.util.Arrays;

import games.stendhal.common.Direction;
import games.stendhal.server.core.engine.SingletonRepository;
import games.stendhal.server.core.engine.StendhalRPZone;
import games.stendhal.server.entity.RPEntity;
import games.stendhal.server.entity.npc.NPCList;
import games.stendhal.server.entity.npc.ShopList;
import games.stendhal.server.entity.npc.SpeakerNPC;
import games.stendhal.server.entity.npc.behaviour.adder.SellerAdder;
import games.stendhal.server.entity.npc.behaviour.impl.SellerBehaviour;
import games.stendhal.server.maps.ados.market.FishermansDaughterNPC;

/**
 * Caroline during the Mine Town Revival Weeks
 */
<span class="fc" id="L31">public class FishermansDaughterSellingNPC implements LoadableContent {</span>
<span class="fc" id="L32">	private final ShopList shops = SingletonRepository.getShopList();</span>
	private void createFishermansDaughterSellingNPC() {
<span class="nc" id="L34">		final StendhalRPZone zone2 = SingletonRepository.getRPWorld().getZone(&quot;0_semos_mountain_n2&quot;);</span>
<span class="nc" id="L35">		final SpeakerNPC npc2 = new SpeakerNPC(&quot;Caroline&quot;) {</span>

			@Override
			protected void createPath() {
<span class="nc" id="L39">				setPath(null);</span>
<span class="nc" id="L40">			}</span>

			@Override
			protected void createDialog() {
<span class="nc" id="L44">				addGreeting(&quot;Hello, nice to meet you! Welcome at my small Mine Town market stand!&quot;);</span>
<span class="nc" id="L45">				addJob(&quot;I have been asked to work here and sell some tasty snacks and drinks during the Mine Town Revival weeks. An awesome chance to gain some cooking skills for my business which I'm working on at the moment!&quot;);</span>
<span class="nc" id="L46">				addHelp(&quot;You should go and enjoy the games and party around the Mine Town :) Hope you tested my favourite, the #outfit #colouring already, it's perfect for Halloween days and selfmade costumes :)&quot;);</span>
<span class="nc" id="L47">				addReply(Arrays.asList(&quot;outfit&quot;, &quot;colouring&quot;, &quot;outfit colouring&quot;),</span>
		        &quot;It's just pefect for Semos Mine Town Revival weeks and Halloween! You can recolour your outfit by right clicking on yourself. Choose Set Outfit and then pick your favourite colour for hair and dress! It's awesome!&quot;);
<span class="nc" id="L49">				addReply(&quot;susi&quot;, &quot;Oh she is a lovely girl! I met her around here, she is so happy that she can celebrate with all of us again!&quot;);</span>
<span class="nc" id="L50">				addOffer(&quot;I sell some snacks and drinks during the Mine Town Weeks. Please take a look at the list close to the stand.&quot;);</span>
<span class="nc" id="L51">				addQuest(&quot;I heard that #Susi would love to make friends, she is inside of the house. Or you can ask Fidorea next to me about a little run.&quot;);</span>
<span class="nc" id="L52">				addGoodbye(&quot;Bye, hope you'll enjoy the days here!&quot;);</span>
<span class="nc" id="L53">				new SellerAdder().addSeller(this, new SellerBehaviour(shops.get(&quot;sellrevivalweeks&quot;)), false);</span>
<span class="nc" id="L54">			}</span>
			
			@Override
			protected void onGoodbye(RPEntity player) {
<span class="nc" id="L58">				setDirection(Direction.DOWN);</span>
<span class="nc" id="L59">			}</span>
		};

<span class="nc" id="L62">		npc2.setPosition(62, 106);</span>
<span class="nc" id="L63">		npc2.setEntityClass(&quot;fishermansdaughternpc&quot;);</span>
<span class="nc" id="L64">		npc2.setDirection(Direction.DOWN);</span>
<span class="nc" id="L65">		npc2.initHP(100);</span>
<span class="nc" id="L66">		zone2.add(npc2);</span>
<span class="nc" id="L67">	}</span>


	/**
	 * removes an NPC from the world and NPC list
	 *
	 * @param name name of NPC
	 */
	private void removeNPC(String name) {
<span class="nc" id="L76">		SpeakerNPC npc = NPCList.get().get(name);</span>
<span class="nc bnc" id="L77" title="All 2 branches missed.">		if (npc == null) {</span>
<span class="nc" id="L78">			return;</span>
		}
<span class="nc" id="L80">		npc.getZone().remove(npc);</span>
<span class="nc" id="L81">	}</span>

	@Override
	public void addToWorld() {
<span class="nc" id="L85">		removeNPC(&quot;Caroline&quot;);</span>
<span class="nc" id="L86">		createFishermansDaughterSellingNPC();</span>
<span class="nc" id="L87">	}</span>


	/**
	 * removes Caroline from the Mine Town and places her back into her home in Ados.
	 *
	 * @return &lt;code&gt;true&lt;/code&gt;, if the content was removed, &lt;code&gt;false&lt;/code&gt; otherwise
	 */
	@Override
	public boolean removeFromWorld() {
<span class="nc" id="L97">		removeNPC(&quot;Caroline&quot;);</span>

<span class="nc" id="L99">		final StendhalRPZone zone = SingletonRepository.getRPWorld().getZone(&quot;int_ados_carolines_house_0&quot;);</span>
<span class="nc" id="L100">		new FishermansDaughterNPC().createFishermansDaughterSellingNPC(zone);</span>

<span class="nc" id="L102">		return true;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>