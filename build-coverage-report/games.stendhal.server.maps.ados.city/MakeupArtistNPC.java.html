<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>MakeupArtistNPC.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">stendhal</a> &gt; <a href="index.source.html" class="el_package">games.stendhal.server.maps.ados.city</a> &gt; <span class="el_source">MakeupArtistNPC.java</span></div><h1>MakeupArtistNPC.java</h1><pre class="source lang-java linenums">/* $Id$ */
/***************************************************************************
 *                   (C) Copyright 2003-2010 - Stendhal                    *
 ***************************************************************************
 ***************************************************************************
 *                                                                         *
 *   This program is free software; you can redistribute it and/or modify  *
 *   it under the terms of the GNU General Public License as published by  *
 *   the Free Software Foundation; either version 2 of the License, or     *
 *   (at your option) any later version.                                   *
 *                                                                         *
 ***************************************************************************/
package games.stendhal.server.maps.ados.city;

import games.stendhal.common.Direction;
import games.stendhal.server.core.config.ZoneConfigurator;
import games.stendhal.server.core.engine.StendhalRPZone;
import games.stendhal.server.entity.npc.SpeakerNPC;
import games.stendhal.server.entity.npc.behaviour.adder.OutfitChangerAdder;
import games.stendhal.server.entity.npc.behaviour.impl.OutfitChangerBehaviour;
import games.stendhal.server.util.TimeUtil;

import java.util.HashMap;
import java.util.Map;

/**
 * Creates the NPCs and portals in Ados City.
 *
 * @author hendrik
 */
<span class="fc" id="L31">public class MakeupArtistNPC implements ZoneConfigurator {</span>

	/**
	 * Configure a zone.
	 *
	 * @param	zone		The zone to be configured.
	 * @param	attributes	Configuration attributes.
	 */
	@Override
	public void configureZone(final StendhalRPZone zone, final Map&lt;String, String&gt; attributes) {
<span class="fc" id="L41">		buildFidorea(zone, 20, 13);</span>
<span class="fc" id="L42">	}</span>

	/**
	 * creates Fidorea in the specified zone
	 *
	 * @param zone StendhalRPZone
	 * @param x x
	 * @param y y
	 */
	public void buildFidorea(final StendhalRPZone zone, int x, int y) {
<span class="fc" id="L52">		final SpeakerNPC npc = new SpeakerNPC(&quot;Fidorea&quot;) {</span>
			
			private static final int MINUTES_BEFORE_WEAR_OFF = 5 * 60;

			@Override
			protected void createPath() {
				// npc does not move
<span class="fc" id="L59">				setPath(null);</span>
<span class="fc" id="L60">			}</span>

			@Override
			protected void createDialog() {
<span class="fc" id="L64">				addGreeting(&quot;Hi, there. Do you need #help with anything?&quot;);</span>
<span class="fc" id="L65">				addHelp(getHelpDescription());</span>

				// this is a hint that one of the items Anna wants is a dress (goblin dress)
<span class="fc" id="L68">				addQuest(&quot;Are you looking for toys for Anna? She loves my costumes, perhaps she'd like a #dress to try on. If you already got her one, I guess she'll have to wait till I make more costumes!&quot;); </span>
<span class="fc" id="L69">				addJob(&quot;I am a makeup artist.&quot;);</span>
<span class="fc" id="L70">				addReply(</span>
				        &quot;dress&quot;,
				        &quot;I read stories that goblins wear a dress as a kind of armor! If you're scared of goblins, like me, maybe you can buy a dress somewhere. &quot;);
				//addReply(&quot;offer&quot;, &quot;Normally I sell masks. But I ran out of clothes and cannot by new ones until the cloth seller gets back from his search.&quot;);
<span class="fc" id="L74">				addGoodbye(&quot;Bye, come back soon.&quot;);</span>

<span class="fc" id="L76">				final Map&lt;String, Integer&gt; priceList = new HashMap&lt;String, Integer&gt;();</span>
<span class="fc" id="L77">				priceList.put(&quot;mask&quot;, 20);</span>
<span class="fc" id="L78">				final OutfitChangerBehaviour behaviour = new OutfitChangerBehaviour(priceList, MINUTES_BEFORE_WEAR_OFF, &quot;Your mask has worn off.&quot;);</span>
<span class="fc" id="L79">				new OutfitChangerAdder().addOutfitChanger(this, behaviour, &quot;buy&quot;);</span>
<span class="fc" id="L80">			}</span>

			private String getHelpDescription() {
<span class="fc" id="L83">				String helpTemplate = &quot;I sell masks. If you don't like your mask, you can #return and I will remove it, or you can just wait %s, until it wears off.&quot;;</span>
<span class="fc" id="L84">				int secondsBeforeWearOff = MINUTES_BEFORE_WEAR_OFF * 60;</span>
<span class="fc" id="L85">				return String.format(helpTemplate, TimeUtil.timeUntil(secondsBeforeWearOff));</span>
			}
		};

<span class="fc" id="L89">		npc.setEntityClass(&quot;woman_008_npc&quot;);</span>
<span class="fc" id="L90">		npc.setPosition(x, y);</span>
<span class="fc" id="L91">		npc.setDirection(Direction.DOWN);</span>
<span class="fc" id="L92">		npc.initHP(100);</span>
<span class="fc" id="L93">		npc.setDescription(&quot;You see a beautiful looking woman. Her name is Fidorea and she loooves colours.&quot;);</span>
<span class="fc" id="L94">		zone.add(npc);</span>
<span class="fc" id="L95">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>