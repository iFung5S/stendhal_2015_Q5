<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>StatsPanel.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">stendhal</a> &gt; <a href="index.source.html" class="el_package">games.stendhal.client.gui.stats</a> &gt; <span class="el_source">StatsPanel.java</span></div><h1>StatsPanel.java</h1><pre class="source lang-java linenums">/* $Id$ */
/***************************************************************************
 *                   (C) Copyright 2003-2010 - Stendhal                    *
 ***************************************************************************
 ***************************************************************************
 *                                                                         *
 *   This program is free software; you can redistribute it and/or modify  *
 *   it under the terms of the GNU General Public License as published by  *
 *   the Free Software Foundation; either version 2 of the License, or     *
 *   (at your option) any later version.                                   *
 *                                                                         *
 ***************************************************************************/
package games.stendhal.client.gui.stats;

import games.stendhal.client.entity.StatusID;
import games.stendhal.client.gui.layout.SBoxLayout;
import games.stendhal.client.gui.layout.SLayout;
import games.stendhal.client.gui.styled.Style;
import games.stendhal.client.gui.styled.StyleUtil;
import games.stendhal.common.constants.Testing;

import javax.swing.BorderFactory;
import javax.swing.JPanel;
import javax.swing.JTextArea;

/**
 * Display panel for status icons and player stats. The methods may be safely
 * called outside the event dispatch thread.
 */
class StatsPanel extends JPanel {

	/**
	 * serial version uid
	 */
	private static final long serialVersionUID = -353271026575752035L;

	private final StatLabel hpLabel, atkLabel, defLabel, ratkLabel, xpLabel, levelLabel, moneyLabel;
	private final StatusIconPanel statusIcons;
	private final KarmaIndicator karmaIndicator;
	private final ManaIndicator manaIndicator;
	
	StatsPanel() {
<span class="nc" id="L43">		super();</span>
<span class="nc" id="L44">		setLayout(new SBoxLayout(SBoxLayout.VERTICAL));</span>
		
<span class="nc" id="L46">		statusIcons = new StatusIconPanel(); </span>
<span class="nc" id="L47">		add(statusIcons);</span>
		
<span class="nc" id="L49">		karmaIndicator = KarmaIndicator.create();</span>
<span class="nc" id="L50">		karmaIndicator.setBorder(BorderFactory.createEmptyBorder(2, 2, 2, 2));</span>
<span class="nc" id="L51">		add(karmaIndicator, SLayout.EXPAND_X);</span>
		
<span class="nc" id="L53">		manaIndicator = ManaIndicator.create();</span>
<span class="nc" id="L54">		manaIndicator.setBorder(BorderFactory.createEmptyBorder(2, 2, 2, 2));</span>
<span class="nc" id="L55">		manaIndicator.setToolTipText(&quot;Mana&quot;);</span>
<span class="nc" id="L56">		add(manaIndicator, SLayout.EXPAND_X);</span>
		
<span class="nc" id="L58">		hpLabel = new StatLabel();</span>
<span class="nc" id="L59">		add(hpLabel, SLayout.EXPAND_X);</span>
		
<span class="nc" id="L61">		atkLabel = new StatLabel();</span>
<span class="nc" id="L62">		add(atkLabel, SLayout.EXPAND_X);</span>
		
<span class="nc" id="L64">		defLabel = new StatLabel();</span>
<span class="nc" id="L65">		add(defLabel, SLayout.EXPAND_X);</span>
		
		/* FIXME: ranged stat is disabled until fully implemented */
<span class="nc bnc" id="L68" title="All 2 branches missed.">		if (Testing.COMBAT) {</span>
<span class="nc" id="L69">			ratkLabel = new StatLabel();</span>
<span class="nc" id="L70">			add(ratkLabel, SLayout.EXPAND_X);</span>
		} else {
<span class="nc" id="L72">			ratkLabel = null;</span>
		}
		
<span class="nc" id="L75">		xpLabel = new StatLabel();</span>
<span class="nc" id="L76">		add(xpLabel, SLayout.EXPAND_X);</span>
		
<span class="nc" id="L78">		levelLabel = new StatLabel();</span>
<span class="nc" id="L79">		add(levelLabel, SLayout.EXPAND_X);</span>
		
<span class="nc" id="L81">		moneyLabel = new StatLabel();</span>
<span class="nc" id="L82">		add(moneyLabel, SLayout.EXPAND_X);</span>
<span class="nc" id="L83">	}</span>
	
	/**
	 * Set the HP description string.
	 * 
	 * @param hp
	 */
	void setHP(String hp) {
<span class="nc" id="L91">		hpLabel.setText(hp);</span>
<span class="nc" id="L92">	}</span>

	/**
	 * Set the atk description string.
	 * 
	 * @param atk
	 */
	void setAtk(String atk) {
<span class="nc" id="L100">		atkLabel.setText(atk);</span>
<span class="nc" id="L101">	}</span>

	/**
	 * Set the def description string
	 * 
	 * @param def
	 */
	void setDef(String def) {
<span class="nc" id="L109">		defLabel.setText(def);</span>
<span class="nc" id="L110">	}</span>

	/**
	 * Set the ratk description string.
	 * 
	 * @param ratk
	 */
	void setRatk(String ratk) {
<span class="nc" id="L118">		ratkLabel.setText(ratk);</span>
<span class="nc" id="L119">	}</span>

	/**
	 * Set the XP description string.
	 * 
	 * @param xp
	 */
	void setXP(String xp) {
<span class="nc" id="L127">		xpLabel.setText(xp);</span>
<span class="nc" id="L128">	}</span>

	/**
	 * Set player karma.
	 * 
	 * @param karma
	 */
	void setKarma(double karma) {
<span class="nc" id="L136">		karmaIndicator.setValue(karma);</span>
<span class="nc" id="L137">	}</span>

	/**
	 * Set player mana.
	 * 
	 * @param mana
	 */
	void setMana(double mana) {
<span class="nc" id="L145">		manaIndicator.setMana(mana);</span>
<span class="nc" id="L146">	}</span>

	/**
	 * Set player base mana.
	 * 
	 * @param baseMana
	 */
	void setBaseMana(double baseMana) {
<span class="nc" id="L154">		manaIndicator.setBaseMana(baseMana);</span>
<span class="nc" id="L155">	}</span>
	
	/**
	 * Set the level description.
	 * 
	 * @param level level description
	 */
	void setLevel(String level) {
<span class="nc" id="L163">		levelLabel.setText(level);</span>
<span class="nc" id="L164">	}</span>
	
	/**
	 * Set the money description string.
	 * 
	 * @param money
	 */
	void setMoney(String money) {
<span class="nc" id="L172">		moneyLabel.setText(money);</span>
<span class="nc" id="L173">	}</span>
	
	/**
	 * Show or hide the eating status indicator.
	 * 
	 * @param eating
	 */
	void setEating(final boolean eating) {
<span class="nc" id="L181">		statusIcons.setEating(eating);</span>
<span class="nc" id="L182">	}</span>
	
	/**
	 * Show or hide the choking status indicator.
	 * 
	 * @param choking
	 */
	void setChoking(final boolean choking) {
<span class="nc" id="L190">		statusIcons.setChoking(choking);</span>
<span class="nc" id="L191">	}</span>
	
	/**
	 * Show or hide status indicator.
	 * 
	 * @param ID
	 *         Status ID
	 * @param visible
	 *         Show indicator
	 */
	void setStatus(final StatusID ID, final boolean visible) {
<span class="nc" id="L202">	    statusIcons.setStatus(ID, visible);</span>
<span class="nc" id="L203">	}</span>
	
	/**
	 * Set the away message. null hides the indicator
	 * 
	 * @param message
	 */
	void setAway(final String message) {
<span class="nc" id="L211">		statusIcons.setAway(message);</span>
<span class="nc" id="L212">	}</span>
	
	/**
	 * Show or hide grumpy indicator. null hides the indicator
	 * 
	 * @param message
	 */
	void setGrumpy(final String message) {
<span class="nc" id="L220">		statusIcons.setGrumpy(message);</span>
<span class="nc" id="L221">	}</span>

	/**
	 * A multi line, label like component for the status rows.
	 */
	private static class StatLabel extends JTextArea {
<span class="nc" id="L227">		public StatLabel() {</span>
<span class="nc" id="L228">			setOpaque(false);</span>
<span class="nc" id="L229">			setEditable(false);</span>
<span class="nc" id="L230">			setFocusable(false);</span>
<span class="nc" id="L231">			setWrapStyleWord(true);</span>
<span class="nc" id="L232">			setLineWrap(true);</span>
<span class="nc" id="L233">			Style style = StyleUtil.getStyle();</span>
<span class="nc bnc" id="L234" title="All 2 branches missed.">			if (style != null) {</span>
<span class="nc" id="L235">				setForeground(style.getForeground());</span>
			}
<span class="nc" id="L237">		}</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>